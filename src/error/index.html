<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel='stylesheet' type='text/css' href='../../assets/css/bootstrap.css'>
    <link rel='stylesheet' type='text/css' href='../../assets/css/shared.css'>
    <link rel='stylesheet' type='text/css' href='index.css'>
    <title>unrestrict.me Client</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <img src="../../assets/icons/logo.svg">
    </nav>
    <div id="settings" class="container prompt" style="display:none">
        <h1>Uh oh, something's wrong.</h1>
        <p>We're unable to read your settings file.</p>
        <p>Please refer to the log.txt file for more information. This is located in the installation directory.</p>
    </div>
    <div id="api" class="container prompt" style="display:none">
        <h1>Uh oh, something's wrong.</h1>
        <p>We're unable to ping our API server (<a href="#" data-toggle="collapse" data-target="#viewError" aria-expanded="false" aria-controls="viewError">view error</a>).</a></p>
        <p>This error is probably due to a firewall blocking your connection to our servers. Try running in rescue mode.</p>
        <div class="row">
            <div class="col-sm">
                <button type="button" id="rescueMode" class="btn btn-danger btn-lg btn-block">Start Rescue Mode</button>
            </div>
            <div class="col-sm">
                <button type="button" id="retryAPI" class="btn btn-secondary btn-lg btn-block">Retry</button>
            </div>
        </div>
        <div class="collapse" id="viewError" style="margin-top: 0.5em;margin-bottom: 0.5em">
            <div class="card card-body">
                <div class="list-group">
                    <p class="list-group-item list-group-item-action disabled" id="apiError"></p>
                </div>
            </div>
        </div>
        
    </div>
    <div id="elevate" class="container prompt" style="display:none">
        <h1>Uh oh, something's wrong.</h1>
        <p>unrestrict.me need to be run with elevated permissions (<a href="#" data-toggle="modal" data-target="#why">why?</a>). </p>
        <p>On Windows, this means running unrestrict.me as an administrator. We recommend changing the executable to automatically run as administrator for simplicity.</p>
    </div>
    <div id="key" class="container prompt" style="display:none">
        <h1>Uh oh, something's wrong.</h1>
        <p>unrestrict.me couldn't generate a RSA keypair, used to securely receive information from the API server. </p>
        <p>Check to make sure unrestrict.me has directory permissions. Refer to log.txt for more information.</p>
    </div>
    <div id="updateRun" class="container prompt" style="display:none">
        <h1>Uh oh, something's wrong.</h1>
        <p>We couldn't run the update file. It's mandatory that all installations of unrestrict.me run the latest client version to ensure they remain compatible with our network, and to make sure everyone is protected from possible security vulnerabilities.</p>
        <p>Refer to the log.txt file for more information.</p>
    </div>
    <div id="parse" class="container prompt" style="display:none">
        <h1>Uh oh, something's wrong.</h1>
        <p>Your JSON settings file is not formatted correctly, and as such we were unable to parse it. If you've modified this file, make sure it is in valid JSON notation, and try again.</p>
        <button type="button" class="btn btn-danger" id="clearSettings">Clear Settings File</button>
    </div>
    <div id="rescueModeConnecting" class="container prompt" style="display:none">
        <h1>Launching Rescue Mode.</h1>
        <p>Once rescue mode is running you'll be able to connect to the full unrestrict.me.</p>
    </div>
    <div class="modal fade" id="why" tabindex="-1" role="dialog" aria-labelledby="why" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="why">Why does unrestrict.me need elevated permissions?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                In order for a VPN to work, it needs to make modifications to the system routing table. In essence, it needs to redirect traffic through the VPN as oppose to how it would normally be routed. This is not something that can be done without administrator privileges on most platforms. Whilst workarounds exist, we haven't found them to work consistently across all platforms. If you're worried about us doing anything malicious, you're free to inspect the source code and build the client yourself from the Github repository.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>    
</body>
<script>
    require('./index.js')
    require('../../assets/css/bootstrap.bundle.min.js')
</script>
</html>